{% extends "base_htmls/base.html" %}
{% block title %}
<title>Note-itâ„¢ | Public Notes</title>
<script src="https://cdn.jsdelivr.net/npm/vue"></script>
{% endblock %}

{% block content %}

<div class="content">

    <h1><i class="far fa-clone"></i> Public Notes <small class="text-muted">shared notes</small></h1>

</div>

<hr class="my-4">

<div class="list-group">


    <form class="form-row my-2 my-lg-0" method="POST">
        <div class="col">
            {% if form %}
            <input class="form-control mr-sm-2" type="search" placeholder="Search Author name, title and content!" aria-label="Search" id="Search_note" name="Search_note" value="{{ form }}">
            {% else %}
            <input class="form-control mr-sm-2" type="search" placeholder="Search Author name, title and content!" aria-label="Search" id="Search_note" name="Search_note" value="{{ form }}">
            {% endif %}

        </div>
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
    </form>

    <br>

    {% if notes == [] or notes == None %}

    <div class="alert alert-primary" role="alert">
        <i class="far fa-frown"></i> There are no shared notes.
    </div>

    {% endif %}

    {% for note in notes %}

    <a href="{{ url_for('notes.note', note_id=note._id) }}" class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h2 class="mb-1"><i class="fas fa-sticky-note"></i> {{ note.title }}</h2>
            <p class="list-group-item-text">Author: {{ note.author_nickname }}</p>
        </div>

        <div class="d-flex w-100 justify-content-between">
            <p class="mb-1"></p>
            <p class="list-group-item-text">Created date: {{ note.created_date.strftime("%Y-%m-%d at %H:%M") }}</p>
        </div>

    </a>

    {% endfor %}

</div>

<script>
//data.js
//require the Elasticsearch librray
const elasticsearch = require(['elasticsearch']);
// instantiate an Elasticsearch client
const client = new elasticsearch.Client({
   hosts: [ 'http://localhost:9200']
});
// ping the client to be sure Elasticsearch is up
client.ping({
     requestTimeout: 30000,
 }, function(error) {
 // at this point, eastic search is down, please check your Elasticsearch service
     if (error) {
         console.error('Elasticsearch cluster is down!');
     } else {
         console.log('Everything is ok');
     }
 });
</script>


{% endblock %}